<!--
Nombre del Archivo: change_list.html

Descripci√≥n:
Template personalizado para la lista de cursos de ingreso en el admin.
Incluye herramientas de importaci√≥n desde JSON.

Autor: Carlos Dagorret
Fecha de Creaci√≥n: 2025-12-29
√öltima Modificaci√≥n: 2025-12-29

Licencia: MIT
Copyright (c) 2025 Carlos Dagorret
-->
{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block object-tools-items %}
    {{ block.super }}

    {% if show_import_button %}
    <li>
        <a href="#" onclick="document.getElementById('importForm').style.display='block'; return false;" class="historylink" style="background-color: #28a745; color: white; padding: 10px 15px; border-radius: 4px; text-decoration: none;">
            üì§ Importar desde JSON
        </a>
    </li>
    {% endif %}
{% endblock %}

{% block content %}
    {{ block.super }}

    {% if show_import_button %}
    <div id="importForm" style="display: none; margin-top: 20px; padding: 20px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3>Importar Cursos desde JSON</h3>
        <form method="post" action="{% url 'admin:cursos_cursoingreso_importar_json' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <p>
                <label for="json_file">Selecciona un archivo JSON:</label>
                <input type="file" name="json_file" id="json_file" accept=".json" required>
            </p>
            <p style="background-color: #fff3cd; padding: 10px; border-radius: 4px; border-left: 4px solid #ffc107;">
                <strong>‚ö†Ô∏è Nota:</strong> Si un curso con el mismo "shortname" ya existe, ser√° actualizado. Si no existe, ser√° creado.
            </p>
            <p>
                <button type="submit" class="button" style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
                    ‚úÖ Importar
                </button>
                <button type="button" onclick="document.getElementById('importForm').style.display='none'" class="button" style="background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">
                    ‚ùå Cancelar
                </button>
            </p>
        </form>
    </div>
    {% endif %}
{% endblock %}
